<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pasillo + Popup separado</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <!-- Canvas para el pasillo FPS -->
  <canvas id="corridorCanvas"></canvas>

  <!-- Crosshair en el centro -->
  <div id="crosshair">
    <img src="crosshair.png" width="32" height="32" alt="Crosshair">
  </div>

  <!-- Overlay pointer lock -->
  <div id="blocker">
    <div id="instructions">
      Clic para iniciar<br>
      (W, A, S, D para moverte - Mouse para girar)
    </div>
  </div>

  <!-- Popup modal para ver el modelo con OrbitControls -->
  <div id="popupModal">
    <div id="popupContent">
      <canvas id="popupCanvas"></canvas>
      <div id="popupButtons">
        <button id="btnClose" class="popup-btn">Cerrar</button>
        <button id="btnBuy" class="popup-btn">Comprar</button>
      </div>
    </div>
  </div>

  <!-- Import map para 'three' -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.module.js"
    }
  }
  </script>

  <!-- Primero importamos corridor.js (que exporta initCorridor, animateCorridor, etc.) -->
  <script type="module" src="js/corridor.js"></script>

  <!-- Luego, el script principal (o inline) para popup y para llamar a initCorridor/animateCorridor -->
  <script type="module">
    import { initCorridor, animateCorridor } from './js/corridor.js';
    // Si tienes un popup.js, también lo importas:
    // import { initPopup, showPopup, hidePopup } from './js/popup.js';

    // O si el popup code está aquí inline, lo pones:

    // 1) Inicializamos el pasillo
    initCorridor();

    // 2) Arrancamos el bucle de animación
    animateCorridor();

    // 3) Lógica del popup (OrbitControls) va aquí o en otro archivo
    // ...
    // Por ejemplo, si el user hace click en el pato, corridor.js hace console.log y
    // sugiere llamar a showPopup(). Podrías exponer showPopup y usarlo.

    // function initPopup() { ... }
    // function showPopup() { ... }
    // function hidePopup() { ... }
    // function animatePopup() { ... }

  </script>
</body>
</html>
