<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Proyecto 3D: Pasillo + Popup Separados</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <!-- Canvas del pasillo FPS -->
  <canvas id="corridorCanvas"></canvas>

  <!-- Crosshair en el centro (para apuntar) -->
  <div id="crosshair">
    <img src="crosshair.png" width="32" height="32" alt="Crosshair" />
  </div>

  <!-- Overlay pointer lock (instrucciones) -->
  <div id="blocker">
    <div id="instructions">
      Clic para iniciar 2025-02-05 16:46<br>
      (W, A, S, D para moverte - Mouse para girar)
    </div>
  </div>

  <!-- Popup (visor con OrbitControls) -->
  <div id="popupModal">
    <div id="popupContent">
      <canvas id="popupCanvas"></canvas>
      <div id="popupButtons">
        <button id="btnClose" class="popup-btn">Cerrar</button>
        <button id="btnBuy" class="popup-btn">Comprar</button>
      </div>
    </div>
  </div>

  <!-- Import map para 'three' -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.module.js"
    }
  }
  </script>

  <!-- Script del popup -->
  <script type="module" src="./js/popup.js"></script>

  <!-- Script del pasillo -->
  <script type="module" src="./js/corridor.js"></script>

  <!-- Script inline principal que llama a initPopup, initCorridor, etc. -->
  <script type="module">
    import { initCorridor, animateCorridor } from './js/corridor.js';
    import { initPopup } from './js/popup.js';

    // Inicializa popup (enlaza botones, renderer, etc.)
    initPopup();

    // Inicializa el pasillo
    initCorridor();

    // Arranca bucle de animaci√≥n del pasillo
    animateCorridor();
  </script>

</body>
</html>
