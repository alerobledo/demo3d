<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Proyecto 3D: Pasillo + Popup Separados</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <!-- Canvas del pasillo (FPS) -->
  <canvas id="corridorCanvas"></canvas>

  <!-- Crosshair en el centro -->
  <div id="crosshair">
    <img src="crosshair.png" width="32" height="32" alt="Crosshair" />
  </div>

  <!-- Overlay para pointer lock (instrucciones) -->
  <div id="blocker">
    <div id="instructions">
      Clic para iniciar<br>
      (W, A, S, D para moverte - Mouse para girar)
    </div>
  </div>

  <!-- Popup modal para el visor con OrbitControls -->
  <div id="popupModal">
    <div id="popupContent">
      <canvas id="popupCanvas"></canvas>
      <div id="popupButtons">
        <button id="btnClose" class="popup-btn">Cerrar</button>
        <button id="btnBuy" class="popup-btn">Comprar</button>
      </div>
    </div>
  </div>

  <!-- Import map para 'three' -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.module.js"
    }
  }
  </script>

  <!-- Cargamos el módulo del popup -->
  <script type="module" src="./js/popup.js"></script>

  <!-- Cargamos el módulo del pasillo -->
  <script type="module" src="./js/corridor.js"></script>

  <!-- Script principal para inicializar ambos módulos -->
  <script type="module">
    import { initCorridor, animateCorridor } from './js/corridor.js';
    import { initPopup } from './js/popup.js';

    initPopup();
    initCorridor();
    animateCorridor();
  </script>

</body>
</html>
